{"ast":null,"code":"var _jsxFileName = \"/Users/ashnaanil/Desktop/VendingMachineProject/411frontend/src/components/Signup.jsx\";\nimport React, { Component } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Paper from '@material-ui/core/Paper';\nimport Avatar from '@material-ui/core/Avatar';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport LockIcon from '@material-ui/icons/LockOutlined';\nimport { withStyles } from '@material-ui/core/styles';\nimport CloseIcon from '@material-ui/icons/Close';\nimport \"./styles/Login.css\";\nconst apiLink = 'http://127.0.0.1:8000/api/users/';\n;\n\nclass Signup extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      password: '',\n      redirect: false,\n      id: undefined,\n      logged_in: localStorage.getItem('token') ? true : false,\n      catchError: false\n    };\n    this.submit = this.submit.bind(this);\n    this.textChange = this.textChange.bind(this);\n  } //   componentDidMount() {\n  //   if (this.state.logged_in) {\n  //     // need to change apilink\n  //     fetch('http://localhost:8000/user/token/obtain/', {\n  //       headers: {\n  //         Authorization: `JWT ${localStorage.getItem('token')}`\n  //       }\n  //     })\n  //       .then(res => res.json())\n  //       .then(json => {\n  //           // may change\n  //         this.setState({\n  //           username: json.username,\n  //           id: json.id,\n  //           redirect: true });\n  //       });\n  //   }\n  // }\n\n\n  submit(e) {\n    e.preventDefault();\n    const options = {\n      username: this.state.username,\n      password: this.state.password\n    }; // need to change apilink\n\n    fetch('http://localhost:8000/user/create/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(options)\n    }).then(res => res.json()).then(json => {\n      // localStorage.setItem('token', json.token);\n      localStorage.setItem('refresh_token', json.refresh);\n      localStorage.setItem('access_token', json.access);\n      console.log(localStorage.getItem('access_token'));\n      console.log(localStorage.getItem('refresh_token'));\n      this.setState({\n        logged_in: true,\n        // may change\n        username: json.username,\n        id: json.id,\n        redirect: true\n      });\n    });\n  } // try to call the api to get users result\n  // submit(e){\n  //   e.preventDefault();\n  //     const options = {\n  //         username: this.state.username,\n  //         password: this.state.password,\n  //     }\n  //     console.log(`Adding user ${this.state.username}, ${this.state.password}`)\n  //     axios.post(apiLink, options).then((response)=>{\n  //         this.setState({\n  //             id: response.data.id,\n  //             redirect: true\n  //         })\n  //     }).catch((error)=>{\n  //         this.setState({\n  //             catchError: true\n  //         });\n  //     });\n  // }\n  // when text change, change the corresponding state\n\n\n  textChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: '/mainfunction',\n          state: {\n            id: this.state.id\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 17\n        }\n      });\n    }\n\n    const {\n      classes\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }\n    }, \"Vending Machine Locator\"), /*#__PURE__*/React.createElement(Paper, {\n      className: \"paper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 21\n      }\n    }, \"Please Sign Up\"), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      name: \"username\",\n      onChange: this.textChange,\n      label: \"Username\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(TextField, {\n      name: \"password\",\n      type: \"password\",\n      onChange: this.textChange,\n      label: \"Password\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Link, {\n      to: \"/mainfunction\",\n      style: {\n        textDecoration: 'none'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"form\",\n      fullWidth: true,\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: this.submit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 29\n      }\n    }, \"Sign Up an account\")), /*#__PURE__*/React.createElement(Typography, {\n      className: \"form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 25\n      }\n    }, \"Don't have an account yet?\"), /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      style: {\n        textDecoration: 'none'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"form\",\n      fullWidth: true,\n      variant: \"contained\",\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 29\n      }\n    }, \"Back to Login\")))));\n  }\n\n}\n\nexport default Signup;","map":{"version":3,"sources":["/Users/ashnaanil/Desktop/VendingMachineProject/411frontend/src/components/Signup.jsx"],"names":["React","Component","Link","Redirect","axios","Typography","TextField","Button","IconButton","Paper","Avatar","Snackbar","LockIcon","withStyles","CloseIcon","apiLink","Signup","constructor","props","state","username","password","redirect","id","undefined","logged_in","localStorage","getItem","catchError","submit","bind","textChange","e","preventDefault","options","fetch","method","headers","body","JSON","stringify","then","res","json","setItem","refresh","access","console","log","setState","event","target","name","value","render","pathname","classes","textDecoration"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Paper from '@material-ui/core/Paper';\nimport Avatar from '@material-ui/core/Avatar';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport LockIcon from '@material-ui/icons/LockOutlined';\nimport { withStyles } from '@material-ui/core/styles';\nimport CloseIcon from '@material-ui/icons/Close';\nimport \"./styles/Login.css\"\n\n\nconst apiLink = 'http://127.0.0.1:8000/api/users/';;\n\nclass Signup extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: '',\n            password: '',\n            redirect: false,\n            id: undefined,\n            logged_in: localStorage.getItem('token') ? true : false,\n            catchError: false\n        }\n        this.submit = this.submit.bind(this);\n        this.textChange = this.textChange.bind(this);\n\n    }\n\n    //   componentDidMount() {\n    //   if (this.state.logged_in) {\n    //     // need to change apilink\n    //     fetch('http://localhost:8000/user/token/obtain/', {\n    //       headers: {\n    //         Authorization: `JWT ${localStorage.getItem('token')}`\n    //       }\n    //     })\n    //       .then(res => res.json())\n    //       .then(json => {\n    //           // may change\n    //         this.setState({\n    //           username: json.username,\n    //           id: json.id,\n    //           redirect: true });\n    //       });\n    //   }\n    // }\n\n    submit(e) {\n        e.preventDefault();\n        const options = {\n            username: this.state.username,\n            password: this.state.password,\n        }\n        // need to change apilink\n        fetch('http://localhost:8000/user/create/', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(options)\n        })\n            .then(res => res.json())\n            .then(json => {\n                // localStorage.setItem('token', json.token);\n                localStorage.setItem('refresh_token', json.refresh);\n                localStorage.setItem('access_token', json.access);\n                console.log(localStorage.getItem('access_token'));\n                console.log(localStorage.getItem('refresh_token'));\n                this.setState({\n                    logged_in: true,\n                    // may change\n                    username: json.username,\n                    id: json.id,\n                    redirect: true\n                });\n            });\n    }\n\n    // try to call the api to get users result\n    // submit(e){\n    //   e.preventDefault();\n    //     const options = {\n    //         username: this.state.username,\n    //         password: this.state.password,\n    //     }\n    //     console.log(`Adding user ${this.state.username}, ${this.state.password}`)\n    //     axios.post(apiLink, options).then((response)=>{\n    //         this.setState({\n    //             id: response.data.id,\n    //             redirect: true\n    //         })\n    //     }).catch((error)=>{\n    //         this.setState({\n    //             catchError: true\n    //         });\n    //     });\n    // }\n    // when text change, change the corresponding state\n    textChange(event) {\n        this.setState({\n            [event.target.name]: event.target.value\n        });\n    }\n\n\n\n\n\n    render() {\n        if (this.state.redirect) {\n            return (\n                <Redirect to={{ pathname: '/mainfunction', state: { id: this.state.id } }} />\n            )\n        }\n        const { classes } = this.props;\n        return (\n            <div className=\"container\">\n                <Typography variant=\"h2\">\n                    Vending Machine Locator\n                </Typography>\n                <Paper className=\"paper\">\n\n                    <Typography variant=\"h4\">\n                        Please Sign Up\n                    </Typography>\n                    <form className=\"form\">\n                        <TextField\n                            name=\"username\"\n                            onChange={this.textChange}\n                            label=\"Username\"\n                            fullWidth\n\n                        />\n                        <TextField\n                            name=\"password\"\n                            type=\"password\"\n                            onChange={this.textChange}\n                            label=\"Password\"\n                            fullWidth\n\n                        />\n                        <Link to=\"/mainfunction\" style={{ textDecoration: 'none' }}>\n                            <Button\n                                className=\"form\"\n                                fullWidth\n                                variant=\"contained\"\n                                color=\"primary\"\n                                onClick={this.submit}\n                            >\n                                Sign Up an account\n                        </Button>\n                        </Link>\n\n                        <Typography className=\"form\">\n                            Don't have an account yet?\n                        </Typography>\n                        <Link to=\"/\" style={{ textDecoration: 'none' }}>\n                            <Button\n                                className=\"form\"\n                                fullWidth\n                                variant=\"contained\"\n                                color=\"primary\"\n                            >\n                                Back to Login\n                            </Button>\n                        </Link>\n                    </form>\n                </Paper>\n\n\n            </div>\n        )\n    }\n}\n\nexport default (Signup);\n"]},"metadata":{},"sourceType":"module"}