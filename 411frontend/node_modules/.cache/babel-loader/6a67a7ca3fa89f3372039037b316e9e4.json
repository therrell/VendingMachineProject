{"ast":null,"code":"var _jsxFileName = \"/Users/ashnaanil/Desktop/VendingMachineProject/411frontend/src/components/Location.jsx\";\nimport React, { Component } from 'react';\nimport { render } from \"react-dom\";\nimport { Link, Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport Button from '@material-ui/core/Button';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport IconButton from '@material-ui/core/IconButton';\nimport Paper from '@material-ui/core/Paper';\nimport \"./styles/loc.css\";\nimport VMinfoModal from './VMinfoModal.jsx';\nimport VMinfo from './VMinfo.jsx';\nconst apiLink_vm = 'http://127.0.0.1:8000/api/machines/';\n;\nconst apiLink = 'https://www.googleapis.com/geolocation/v1/geolocate?key=AIzaSyAVDsmLtJdg7kUJb_eiFPJhKkf0uZvPjTY';\n;\n\nclass Location extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      a: '',\n      b: '',\n      findResult: [],\n      vm_info: [],\n      back: false,\n      dcl: {\n        buildId: 210,\n        latitude: 40.113132,\n        longitude: -88.226455\n      },\n      siebal: {\n        buildId: 563,\n        latitude: 40.11385483196672,\n        longitude: -88.22493553161621\n      },\n      grainger: {\n        buildId: 324,\n        latitude: 40.1125317,\n        longitude: -88.2269931\n      },\n      union: {\n        buildId: 23,\n        latitude: 40.1093460,\n        longitude: -88.2272315\n      }\n    };\n    this.back = this.back.bind(this);\n    this.distance = this.distance.bind(this);\n    this.componentDidMount = this.componentDidMount.bind(this);\n    this.loadVMs = this.loadVMs.bind(this);\n    this.loadVMs();\n  }\n\n  back() {\n    this.setState({\n      back: true\n    });\n  }\n\n  loadVMs() {\n    axios.get(apiLink_vm).then(response => {\n      this.setState({\n        vm_info: response.data\n      });\n      console.log(this.state.result);\n    }).catch(error => {\n      console.log(error);\n      this.setState({\n        catchError: true\n      });\n    });\n  }\n\n  distance(lat1, lon1, lat2, lon2, unit) {\n    if (lat1 == lat2 && lon1 == lon2) {\n      console.log(\"Distance is :\", \"0\");\n      return 0;\n    } else {\n      var radlat1 = Math.PI * lat1 / 180;\n      var radlat2 = Math.PI * lat2 / 180;\n      var theta = lon1 - lon2;\n      var radtheta = Math.PI * theta / 180;\n      var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\n\n      if (dist > 1) {\n        dist = 1;\n      }\n\n      dist = Math.acos(dist);\n      dist = dist * 180 / Math.PI;\n      dist = dist * 60 * 1.1515;\n\n      if (unit == \"K\") {\n        dist = dist * 1.609344;\n      }\n\n      if (unit == \"N\") {\n        dist = dist * 0.8684;\n      }\n\n      console.log(\"Distance is :\", dist);\n      return dist.toFixed(4);\n    }\n  }\n\n  componentDidMount(props) {\n    let currentComponent = this;\n    navigator.geolocation.getCurrentPosition(function (position) {\n      //var distance = navigator.geolocation.distance(position.coords.latitude, position.coords.longitude, 48.8567, 2.3508, 'M');\n      currentComponent.setState({\n        a: position.coords.latitude,\n        b: position.coords.longitude\n      });\n      console.log(\"Latitude is :\", position.coords.latitude);\n      console.log(\"Longitude is :\", position.coords.longitude);\n    });\n  }\n\n  render() {\n    if (this.state.back) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: '/vminfo',\n          state: {\n            id: this.state.id\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }\n      });\n    }\n\n    const self = this;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"form\",\n      onClick: this.back,\n      startIcon: /*#__PURE__*/React.createElement(ArrowBackIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 69\n        }\n      }),\n      variant: \"contained\",\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }\n    }, \"Find a Vending Machine\"), /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }\n    }, \"Vending Machine Locator\"), /*#__PURE__*/React.createElement(Paper, {\n      className: \"paper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }\n    }, \"Based on Location and Popularity\"), /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 21\n      }\n    }, \"Distance in km\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 21\n      }\n    }), \"Dcl (210) is : \", this.distance(self.state.a, self.state.b, self.state.dcl.latitude, self.state.dcl.longitude, \"K\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 21\n      }\n    }), \"Siebal (563) is : \", this.distance(self.state.a, self.state.b, self.state.siebal.latitude, self.state.siebal.longitude, \"K\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 21\n      }\n    }), \"Grainger (324) is : \", this.distance(self.state.a, self.state.b, self.state.grainger.latitude, self.state.grainger.longitude, \"K\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 21\n      }\n    }), \"Union (23) is : \", this.distance(self.state.a, self.state.b, self.state.union.latitude, self.state.union.longitude, \"K\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(TableContainer, {\n      component: Paper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Table, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(TableHead, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(TableRow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 27\n      }\n    }, \"BuildingID\"), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 27\n      }\n    }, \"VMID\"), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 27\n      }\n    }, \"VMLocation\"), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 27\n      }\n    }, \"Status\"), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 27\n      }\n    }, \"Type\"))), /*#__PURE__*/React.createElement(TableBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 23\n      }\n    }, this.state.vm_info.map((row, i) => /*#__PURE__*/React.createElement(TableRow, {\n      key: row.vmID,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 27\n      }\n    }, row.buildingID), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 27\n      }\n    }, row.vmID), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 27\n      }\n    }, row.VMLocation), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 27\n      }\n    }, row.status), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 27\n      }\n    }, row.type), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(VMinfoModal, {\n      vmId: row.vmID,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 52\n      }\n    }))))))));\n  }\n\n}\n\nrender( /*#__PURE__*/React.createElement(Location, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 8\n  }\n}), document.getElementById(\"root\"));\nexport default Location;","map":{"version":3,"sources":["/Users/ashnaanil/Desktop/VendingMachineProject/411frontend/src/components/Location.jsx"],"names":["React","Component","render","Link","Redirect","axios","Typography","TextField","ArrowBackIcon","Button","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","IconButton","Paper","VMinfoModal","VMinfo","apiLink_vm","apiLink","Location","constructor","props","state","a","b","findResult","vm_info","back","dcl","buildId","latitude","longitude","siebal","grainger","union","bind","distance","componentDidMount","loadVMs","setState","get","then","response","data","console","log","result","catch","error","catchError","lat1","lon1","lat2","lon2","unit","radlat1","Math","PI","radlat2","theta","radtheta","dist","sin","cos","acos","toFixed","currentComponent","navigator","geolocation","getCurrentPosition","position","coords","pathname","id","self","map","row","i","vmID","buildingID","VMLocation","status","type","document","getElementById"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { render } from \"react-dom\";\nimport { Link, Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport Button from '@material-ui/core/Button';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport IconButton from '@material-ui/core/IconButton';\nimport Paper from '@material-ui/core/Paper';\nimport \"./styles/loc.css\"\nimport VMinfoModal from './VMinfoModal.jsx';\nimport VMinfo from './VMinfo.jsx';\n\nconst apiLink_vm = 'http://127.0.0.1:8000/api/machines/';;\nconst apiLink = 'https://www.googleapis.com/geolocation/v1/geolocate?key=AIzaSyAVDsmLtJdg7kUJb_eiFPJhKkf0uZvPjTY';;\n\nclass Location extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n          a:'',\n          b:'',\n          findResult: [],\n          vm_info : [],\n          back: false,\n          dcl: {buildId:210, latitude:40.113132, longitude:-88.226455},\n          siebal: {buildId:563, latitude:40.11385483196672,longitude:-88.22493553161621},\n          grainger: {buildId:324, latitude:40.1125317,longitude:-88.2269931},\n          union: {buildId:23, latitude:40.1093460, longitude:-88.2272315},\n        }\n        this.back = this.back.bind(this);\n      this.distance = this.distance.bind(this);\n      this.componentDidMount = this.componentDidMount.bind(this);\n      this.loadVMs = this.loadVMs.bind(this);\n\n      this.loadVMs()\n\n    };\n\n    back() {\n        this.setState({\n            back: true\n        });\n    }\n\n    loadVMs() {\n        axios.get(apiLink_vm).then((response)=>{\n            this.setState({\n                vm_info: response.data\n            })\n            console.log(this.state.result);\n        }).catch((error)=>{\n            console.log(error);\n            this.setState({\n                catchError: true\n            });\n        });\n    }\n\n\ndistance(lat1, lon1, lat2, lon2, unit) {\n    \tif ((lat1 == lat2) && (lon1 == lon2)) {\n        console.log(\"Distance is :\", \"0\");\n    \t\treturn 0;\n    \t}\n    \telse {\n    \t\tvar radlat1 = Math.PI * lat1/180;\n    \t\tvar radlat2 = Math.PI * lat2/180;\n    \t\tvar theta = lon1-lon2;\n    \t\tvar radtheta = Math.PI * theta/180;\n    \t\tvar dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\n    \t\tif (dist > 1) {\n    \t\t\tdist = 1;\n    \t\t}\n    \t\tdist = Math.acos(dist);\n    \t\tdist = dist * 180/Math.PI;\n    \t\tdist = dist * 60 * 1.1515;\n    \t\tif (unit==\"K\") { dist = dist * 1.609344 }\n    \t\tif (unit==\"N\") { dist = dist * 0.8684 }\n        console.log(\"Distance is :\", dist);\n    \t\treturn dist.toFixed(4);\n    \t}\n}\n\ncomponentDidMount(props) {\n  let currentComponent = this;\n      navigator.geolocation.getCurrentPosition(function(position) {\n        //var distance = navigator.geolocation.distance(position.coords.latitude, position.coords.longitude, 48.8567, 2.3508, 'M');\n        currentComponent.setState({a: position.coords.latitude,\n                                   b: position.coords.longitude})\n        console.log(\"Latitude is :\", position.coords.latitude);\n        console.log(\"Longitude is :\", position.coords.longitude);\n      });\n}\n\nrender() {\n  if (this.state.back) {\n      return (\n          <Redirect to={{ pathname: '/vminfo', state: { id: this.state.id } }} />\n      )\n  }\n  const self = this;\n        return (\n            <div className=\"container\">\n            <Button className=\"form\" onClick={this.back} startIcon={<ArrowBackIcon />} variant=\"contained\" color=\"primary\">\n            Find a Vending Machine\n            </Button>\n                <Typography variant=\"h3\">\n                    Vending Machine Locator\n                </Typography>\n                <Paper className=\"paper\">\n                    <Typography variant=\"h4\">\n                        Based on Location and Popularity\n                    </Typography>\n                    <Typography variant=\"h6\">\n                    Distance in km\n                    <br/>\n                    Dcl (210) is : {this.distance(self.state.a, self.state.b, self.state.dcl.latitude, self.state.dcl.longitude, \"K\")}\n                    <br/>\n                    Siebal (563) is : {this.distance(self.state.a, self.state.b, self.state.siebal.latitude, self.state.siebal.longitude, \"K\")}\n                    <br/>\n                    Grainger (324) is : {this.distance(self.state.a, self.state.b, self.state.grainger.latitude, self.state.grainger.longitude, \"K\")}\n                    <br/>\n                    Union (23) is : {this.distance(self.state.a, self.state.b, self.state.union.latitude, self.state.union.longitude, \"K\")}\n                    <br/>\n                    </Typography>\n              </Paper>\n              <TableContainer component={Paper}>\n                  <Table >\n                      <TableHead>\n                      <TableRow>\n                          <TableCell align=\"left\">BuildingID</TableCell>\n                          <TableCell align=\"left\">VMID</TableCell>\n                          <TableCell align=\"left\">VMLocation</TableCell>\n                          <TableCell align=\"left\">Status</TableCell>\n                          <TableCell align=\"left\">Type</TableCell>\n                      </TableRow>\n                      </TableHead>\n                      <TableBody >\n                        {this.state.vm_info.map((row, i) => (\n                          <TableRow key={row.vmID}>\n                          <TableCell align=\"left\">{row.buildingID}</TableCell>\n                          <TableCell align=\"left\">{row.vmID}</TableCell>\n                          <TableCell align=\"left\">{row.VMLocation}</TableCell>\n                          <TableCell align=\"left\">{row.status}</TableCell>\n                          <TableCell align=\"left\">{row.type}</TableCell>\n                          <TableCell align=\"left\" ><VMinfoModal vmId={row.vmID}/></TableCell>\n                          </TableRow>\n                      ))}\n                      </TableBody>\n                  </Table>\n              </TableContainer>\n            </div>\n        )\n    }\n}\nrender(<Location />, document.getElementById(\"root\"));\n\nexport default (Location);\n"]},"metadata":{},"sourceType":"module"}